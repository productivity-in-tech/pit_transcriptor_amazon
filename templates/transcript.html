{% extends 'base.html' %} {% block title %} PIT Transcriptor {% endblock %}
{% block styler %}<link rel="stylesheet" href="/static/css/transcription_form.css">{% endblock %}
{% block content%}
<section class="section hero is-light">
  <div class="container">
    <div class="hero-head level">
      <div class="level-item">
          <h1 class="title
            is-2">{{job['TranscriptionJob']['TranscriptionJobName']}}
          </h1>
      </div>
      <div class="level-item">
          <h2 class="subtitle is-5">Last Edited: {{version_date}}</h2>
      </div>
    </div>

              <form action="/post-transcription" method='POST'>
            {{form.csrf}}
            {{form.job_name}}
            {{form.update_version}}
            <div class="field">
              <div class="control">
                {{form.transcription(class_="textarea")}}
              </div>
            </div>

            <div class="field is-grouped is-grouped-right">
              <div class="control">
                {{form.submit(class_="button is-info")}}
              </div>
            </div>


      <div class="hero-foot">
        <div class="field is-grouped is-grouped-multiline">
          <div class="tags has-addons">
            <div class="tag is-info">
              Version: 
            </div>
            <div class="tag is-grey-lighter">
            {{version_count}}
            </div>
          </div>

          <div class="tags has-addons">
            <div class="tag is-primary">
              Potential Issues: 
            </div>

            {% if issue_count < 10 %}
            {% set issue_count_color = 'is-success' %}
            {% elif issue_count < 50 %}
            {% set issue_count_color = 'is-warning' %}
            {% else %}
            {% set issue_count_color = 'is-danger' %}
            {% endif %}

            <div class="tag {{issue_count_color}}">
              {{issue_count}}
            </div>

          </div>

          <div class="tags has-addons">
            <div class="tag is-primary">
              Submitted: 
            </div>
            <div class="tag">
              {{job['TranscriptionJob']['CreationTime']}} 
            </div>
          </div>

         <div class="tags has-addons">
            <div class="tag is-dark">
              Language: 
            </div>
            <div class="tag">
              {{flags[job['TranscriptionJob']['LanguageCode']]}} 
            </div>
          </div>

        <div class="tags has-addons">
          <div class="tag is-dark">
            FileType: 
          </div>

          <div class="tag is-grey">
            {{job['TranscriptionJob']['MediaFormat']}} 
          </div>
        </div>
        </div>

        <div class="box is-grey-lighter">
          <form action="/search-replace", method="POST">

            <div class="field is-horizontal">

            <div class="field-label is-normal">
              <label class="label">Find All and Replace</label>
            </div>

            <div class="field-body">
              <div class="field">
                <div class="label">
                {{search_form.search_phrase.label}}
                  </div>
                <div class="control">
                {{search_form.search_phrase(class_="input")}}
                </div>
              </div>
            <div class="field">
              <div class="label">
                {{search_form.replace_phrase.label}}
                </div>
              <div class="control">
              {{search_form.replace_phrase(class_="input")}}
              </div>
						</div>
            <div class="field">
              <div class="control">
                {{search_form.submit(class_="button is-warning")}}
              </div>
            </div>
            </div>
				</form>
            </div>
</section>
{% endblock %}
